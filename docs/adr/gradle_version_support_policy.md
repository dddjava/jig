# Gradleバージョンサポートポリシー

## 状況 (Context)
JIGはGradleプラグインを提供しており、様々なGradleバージョンで動作する必要があります。しかし、すべてのGradleバージョンをサポートすることは現実的ではなく、サポート範囲を明確に定義する必要があります。

## 決定 (Decision)
JIGのGradleプラグインは、以下のGradleバージョンをサポートします：
1. 最新のメジャーバージョン（例：8.x系）
2. 一つ前のメジャーバージョン（例：7.x系）

具体的には：
- 最新のメジャーバージョンの最新リリース
- 一つ前のメジャーバージョンの最終リリース（または最新リリース）

## トレードオフ (Trade-Offs)
このポリシーには以下のトレードオフがあります：

1. **メリット**
   - 開発リソースを最新の2つのメジャーバージョンに集中できる
   - テスト範囲が明確になり、品質保証が容易になる
   - ユーザーに対してサポート範囲が明確になる

2. **デメリット**
   - 古いGradleバージョンを使用しているプロジェクトはJIGの最新バージョンを利用できない
   - メジャーバージョンアップの際に、ユーザーは対応が必要になる場合がある

## 採用ガイドライン (Guidelines)
以下のガイドラインに従います：

1. **テスト対象バージョン**
   - 自動テストでは、サポート対象の全バージョンに対してテストを実行する
   - `SupportGradleVersion` enumで明示的にサポートバージョンを定義する

2. **バージョン更新**
   - 新しいメジャーバージョンがリリースされた場合、適切なタイミングでサポート対象を更新する
   - 一つ前のメジャーバージョンのサポートを終了する際は、リリースノートで明示する

3. **互換性の維持**
   - 可能な限り、サポート対象バージョン間での互換性を維持する
   - 互換性を破る変更が必要な場合は、明確に文書化する

## 実装例
```java
public enum SupportGradleVersion {
    /**
     * JIGが使用しているGradleのバージョン　
     */
    CURRENT(GradleVersion.current().getVersion()),
    /**
     * 最新
     */
    LATEST("8.13"),
    /**
     * 一つ前のメジャーバージョンの最終
     */
    PREVIOUS_MAJOR_LATEST("7.6.4");

    private final String version;

    SupportGradleVersion(String version) {
        this.version = version;
    }

    public String getVersion() {
        return version;
    }
}
```

## 結論 (Consequences)
- 明確なサポートポリシーにより、開発とテストのフォーカスが絞られる
- ユーザーはJIGを使用する際のGradleバージョン要件を理解できる
- 古いGradleバージョンのサポート終了に関する予測可能性が向上する
- 最新の2つのメジャーバージョンをサポートすることで、多くのユーザーのニーズに対応しつつ、開発リソースを効率的に活用できる